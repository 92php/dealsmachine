function numbers(a){a.value=a.value.replace(/[^\d]/g,"")}function caculate_point(){var c,d,a=$("#point_ipt"),b=0;if("number"==typeof min_use_point){if(d=a.val(),""==d)return $("#point_tips").html(""),b;d=parseInt(d),isNaN(d)&&(d=0),a.val(d);var e=parseInt($("#use_point_max").text());d>e&&(d=e,$("#point_ipt, #hidden-point").val(e)),b=(parseFloat(d)*point_rate).toFixed(2),c=" - "+b+" USD",$("#point_tips").html(c)}return b}function clk_tracking_number(){shipid=$(this).attr("shipid"),thisprice=parseFloat($("#Need_Traking_number_fee"+shipid).attr("orgp")),freesmprice=parseFloat($("#freesm"+shipid).attr("orgp"));var a=$("#shipping_sub_total");a.attr("orgp"),$(this).attr("checked")?(freesmprice+=thisprice,$("#freesm"+shipid).html(freesmprice.toFixed(2)),$("#freesm"+shipid).attr("orgp",freesmprice.toFixed(2))):(freesmprice-=thisprice,$("#freesm"+shipid).html(freesmprice.toFixed(2)),$("#freesm"+shipid).attr("orgp",freesmprice.toFixed(2))),a.html(freesmprice.toFixed(2))}function jisuan_total(){var a=0;a=$("#hidden-point-money").val(),$("#point_money").html(a),$("#point_money").attr("orgp",a),a=void 0==a?0:parseFloat(a),sub_total=$("#shipping_sub_total").attr("orgp"),sub_total=void 0==sub_total?0:parseFloat(sub_total),cheknum=$(".Need_Traking_number").attr("checked")?parseFloat($(".Need_Traking_number").val()):0,cheknum=0,insurance=parseFloat($("#insurance").attr("orgp")),xx_sub_total=parseFloat($("#items_sub_total").attr("orgp")),price_total=(sub_total-a+insurance+xx_sub_total+cheknum).toFixed(2),$("#price_total").html(price_total),$("#price_total").attr("orgp",price_total);try{show_my_shop_price("")}catch(b){}}function chenkpayment(){try{var a=document.getElementsByName("payment")}catch(b){return!1}for(var c=a.length,d=0;c>d;d++)if(1==a[d].checked)return!0;return!1}function chenkship(){try{var a=document.getElementsByName("shipping")}catch(b){return!1}for(var c=a.length,d=0;c>d;d++)if(1==a[d].checked)return!0;return!1}function checkInfo(){if(1!=chenkship()){alert(flow_shipping_js_func_checkInfo_0),window.location.hash="ship";try{document.getElementsByName("shipping")[0].focus()}catch(a){}return!1}if(1!=chenkpayment()){alert(flow_shipping_js_func_checkInfo_1),window.location.hash="pay";try{document.getElementsByName("payment")[0].focus()}catch(a){}return!1}try{if("object"==typeof document.getElementById("tel1")&&""==$("#tel1").val())return alert(users_inc_tel_msg),window.location.hash="tel",document.getElementById("tel1").focus(),!1}catch(a){}var b=$("#us_warehouse").val();if(b){var c=check_us_warehouse(b);return c?!0:!1}return!0}function check_us_warehouse(a){var b=0;return $.ajax({type:"POST",async:!1,url:"/"+js_cur_lang_url+"m-flow-a-check_us_warehouse.htm",data:"goods_ids_str="+a,success:function(a){var c=0,d="",e="",f=a.split("@@");for(i=0;f.length>i;i++){var g=f[i].split("|");"1"==g[5]&&(c=1,d+=g[3]+", ",e+=g[4])}var h=$("#country_name").val();1==c&&"UNITED STATES"!=h&&"USA"!=h?(d=d.substr(0,d.length-2),ymPrompt.alert({message:'<span style="color:red;">"'+d+'"'+flow_shipping_js_func_check_us_warehouse_0+"</span><br/><br/>"+e,width:400,height:230,title:"System Message",handler:function(){window.scrollTo(0,0)},btn:[["ok","ok"]]}),b=0):b=1}}),b}function checkcode(a){var a=$(a),b=encodeURIComponent(a.val()),c=a.attr("huance"),d=a.attr("isApply"),e=a.attr("huancode"),f=$('span[entry="all_total_price"]'),g=parseFloat(c).toFixed(2);"1"==d&&b!=e&&(f.html(g),f.attr("orgp",g),a.attr("isApply","0"),a.attr("huance","0"),alert(flow_shipping_js_func_checkcode_0))}function showappdiv(a){0==hitnum%2?($("#"+a).hide(),$("#bt_apple_code").attr("class","bt_apple1")):($("#"+a).show(),$("#bt_apple_code").attr("class","bt_apple2")),hitnum++}function code_apply(a){if(is_include_gifts>0)return alert(flow_shipping_js_func_code_apply_0),!1;var b=$("#"+a),c=encodeURIComponent(b.val());return 0==c.length?!1:c.length>40?(alert(flow_shipping_js_func_code_apply_1),!1):(hitnum=1,$("#apply_msg").html("Loading..."),re_load("/"+js_cur_lang_url+"shopping-cart/?pcode="+c),void 0)}function checkoutBinds(){showConsignee(),saveConsignee(),checkConsignee()}function showConsignee(){$("#a-show-consignee").click(function(){$("#tb-consignee").show(),$("#div-consignee").hide()})}function setAlsoBuoght(){$("#div-also-bought").jCarouselLite({btnNext:"#detailsrightbar",btnPrev:"#detailsleftbar",vertical:!1,play:!0,auto:3e3,visible:8,scroll:2,speed:800})}function saveConsignee(){$("#btn-save-consignee").click(function(){$("#form-consignee").valid()&&(this.disabled=!0,$.post("/"+js_cur_lang_url+"m-flow-a-consignee.htm",$("#form-consignee").serialize()+"&from_checkout=1",function(){window.location.href=window.location.href}))}),$("#btn-cancel-consignee").click(function(){$("#tb-consignee").hide(),$("#div-consignee").show()})}function checkConsignee(){$("#form-consignee").validate({rules:{firstname:{required:!0,maxlength:60},lastname:{required:!0,maxlength:60},tel:{required:!0,maxlength:60},email:{required:!0,maxlength:60,email:!0},addressline1:{required:!0,maxlength:120},city:{required:!0,maxlength:80},province:{required:!0,maxlength:80},country:{required:!0},zipcode:{required:!0,maxlength:20}},messages:{firstname:{required:firstname_msg,maxlength:firstname_maxlength_msg},lastname:{required:lastname_msg,maxlength:lastname_maxlength_msg},tel:{required:tel_msg,maxlength:tel_maxlength_msg},email:{required:email_msg,maxlength:email_maxlength_msg},addressline1:{required:addressline1_msg,maxlength:addressline1_maxlength_msg},city:{required:city_msg,maxlength:city_maxlength_msg},province:{required:province_msg,maxlength:province_maxlength_msg},country:{required:country_msg},zipcode:{required:zipcode_msg,maxlength:zipcode_maxlength_msg}},success:function(a){a.html("&nbsp;").addClass("checked")}})}function point_selected(a){point_arr=a.split(","),point_arr[0],point_arr[1],$("#hidden-point").val(point_arr[1]),$("#point_ipt").val(point_arr[1]),$("#hidden-point-money").val(point_arr[0]),jisuan_total()}$(document).ready(function(){$("#showyiwen").live("mouseover",function(){$("#yiwen").show()}),$("#showyiwen").live("mouseout",function(){$("#yiwen").hide()}),$("#showyiwen1").live("mouseover",function(){$("#gifts_txt").show()}),$("#showyiwen1").live("mouseout",function(){$("#gifts_txt").hide()}),$("#choose_gift").live("click",function(){if(""!=pcode){if(!confirm(flow_shipping_js_choose_gift))return!1;re_load("/"+js_cur_lang_url+"m-flow-a-clearCoupon.htm",function(){$("#choose_gift").attr("checked",!0)})}}),$("#choose_coupon").live("click",function(){if(1==is_include_gifts){if(!confirm(flow_shipping_js_choose_coupon))return!1;re_load("/"+js_cur_lang_url+"m-flow-a-cleargift.htm",function(){$("#choose_coupon").attr("checked",!0)})}})}),jisuan_total(),$(".shipping_method").live("click",function(){switch(shipping_id=$(this).val(),freeyunfei=parseFloat($("#freesm"+shipping_id).attr("orgp")),shipping_id){case"1":$("#Need_Traking_number_button1").show("slow"),$("#china_post_desc").hide("slow");break;case"2":$("#Need_Traking_number_button1").hide("slow"),$("#china_post_desc").hide("slow");break;case"3":$("#Need_Traking_number_button1").hide("slow"),$("#china_post_desc").hide("slow");break;case"4":$("#china_post_desc").show("slow"),$("#Need_Traking_number_button1").hide("slow");break;default:}$("#shipping_sub_total").html(freeyunfei),$("#shipping_sub_total").attr("orgp",freeyunfei),jisuan_total()}),$(".Need_Traking_number").live("click",function(){shipid=$(this).attr("shipid"),thisprice=parseFloat($("#Need_Traking_number_fee"+shipid).attr("orgp")),freesmprice=parseFloat($("#freesm"+shipid).attr("orgp"));var a=$("#shipping_sub_total");a.attr("orgp"),$(this).attr("checked")?(freesmprice+=thisprice,$("#freesm"+shipid).html(freesmprice.toFixed(2)),$("#freesm"+shipid).attr("orgp",freesmprice.toFixed(2))):(freesmprice-=thisprice,$("#freesm"+shipid).html(freesmprice.toFixed(2)),$("#freesm"+shipid).attr("orgp",freesmprice.toFixed(2))),a.html(freesmprice.toFixed(2)),jisuan_total()}),$("#bizhong").val($.cookie("bizhong")),$(".baofei").live("click",function(){yunfei=$("#baofei").attr("orgp"),1==$(this).attr("checked")?($("#insurance").html(yunfei),$("#insurance").attr("orgp",yunfei)):($("#insurance").html(0),$("#insurance").attr("orgp","0")),jisuan_total()}),$(".paymentselect").live("click",function(){id=$(this).val(),"PayPal"==id?$("#bt_apple_code").show("slow"):($("#bt_apple_code").hide("slow"),$("#showapp").hide("slow")),$(".paymentselect").each(function(){sid=$(this).val(),sid==id?$("#subpaymentlist"+sid).show("slow"):$("#subpaymentlist"+sid).hide("slow")})});var hitnum=1;