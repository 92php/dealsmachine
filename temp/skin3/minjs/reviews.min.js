function check_btn_signin(){var a=$("#username").val(),b=$("#password").val();if(""==a.length)return $("#rw_sign_msg").html("<span style='color:red'>"+reviews_func_check_btn_signin_1+"</span>"),!1;var c=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return c.test(a)?""==b?($("#rw_sign_msg").html("<span style='color:red'>"+reviews_func_check_btn_signin_2+"</span>"),!1):($.ajax({type:"post",data:"email="+a+"&password="+b,url:"/"+js_cur_lang_url+"m-users-a-act_sign.htm",cache:!1,timeout:5e3,error:function(a,b){alert(b),$("#rw_sign_msg").html("<span style='color:red'>"+b+"</span>")},beforeSend:function(){$("#rw_sign_msg").html("<span style='color:green'>"+reviews_func_check_btn_signin_3+"</span>")},success:function(a){"Successfully sign"!=a?$("#rw_sign_msg").html("<span style='color:red'>"+a+"</span>"):(nickname=$.getCookie("fullname"),$("#re_nickname").val(nickname),$("#sp_nickname").show(),$(".login_tips").html("(1000 "+characters+")"),$("#js_comment_signBox").hide(),GLOBAL.isLogin())}}),void 0):($("#rw_sign_msg").html("<span style='color:red'>"+reviews_func_check_btn_signin_0+"</span>"),!1)}function is_signin(){return str=$("#js_islogin").html(),str.indexOf("Register")>0?!1:!0}function post_reply(a){if(!is_signin())return alert(reviews_func_post_reply_0),$("#js_comment_signBox").show(),$("#username").focus(),!1;var b=$("#js_re_content").val();b=jQuery.trim(b);var c=$("#re_nickname").val();c=jQuery.trim(c);var d=$("#js_re_content").attr("rid");if(msg="",""==d||isNaN(d))return alert(reviews_func_post_reply_1),!1;if(""==b&&(msg+=reviews_func_post_reply_2,$(".re_content").focus()),""==c&&(msg+=reviews_func_post_reply_3,""==msg&&$("#re_nickname").focus()),""!=msg)return alert(msg),!1;var e=$("#js_bt_post_reply"),f=$('<img style="display:inline;float:right" src="temp/skin3/images/styleimg/indicator.gif"/>');$.ajax({type:"post",data:{re_content:b,re_nickname:c,rid:d},url:"/"+js_cur_lang_url+"m-review-a-save_review_reply-goods_id-"+a+".htm",cache:!1,timeout:5e3,error:function(){e.parent().find(f).remove(),e.show()},beforeSend:function(){e.hide(),e.before(f)},success:function(a){e.parent().find(f).remove(),e.show(),$(".re_content").val(""),"success"==a?alert(reviews_func_post_reply_4):(nickname=$.getCookie("fullname"),$("#re_nickname").val(nickname),$("#sp_nickname").show(),$(".login_tips").html("(1000 "+characters+")"),$("#js_comment_signBox").hide(),alert(a))}})}function forgetpsw(){ymPrompt.setDefaultCfg({okTxt:" "+send+" ",cancelTxt:" "+cancel+" ",closeTxt:""+close_txt,minTxt:""+minimize,maxTxt:""+maximize}),ymPrompt.confirmInfo({icoCls:"",msgCls:"confirm",message:reviews_func_forgetpsw_0+"<br><input type='text' id='myInput' onfocus='this.select()' />",title:reviews_func_forgetpsw_1,height:150,handler:getpassInput,autoClose:!1})}function getpassInput(a){if("ok"!=a)return ymPrompt.close();var b=$("#myInput").val();b=b.replace("-","="),""==b||b.indexOf("@")<0||b.indexOf(".")<0?alert(reviews_func_getpassInput_0):(window.location.href="/"+js_cur_lang_url+"m-users-a-send_pwd_email_check-e-"+b+".htm",ymPrompt.close())}jQuery.extend({getCookie:function(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(a==d[0])return decodeURIComponent(d[1])}return""},setCookie:function(a,b,c){var d=a+"="+encodeURIComponent(b);null!=c&&(d+="; expires="+c),document.cookie=d},removeCookie:function(a){document.cookie=a+"=; expires=Fri, 31 Dec 1999 23:59:59 GMT;"}}),$(".replyBtn ").click(function(){var a=$(this),b=$(this).attr("rid"),c=$.getCookie("fullname"),d=$(this).parents("div.commentReplyBox"),e='<div class="formBox js_formBox">';e+='<div class="comment_input">',e+='<textarea name="re_content" id="js_re_content" cols="30" rows="10" class="re_content" rid="49559"></textarea>',e+='<div class="comment_input_btnWarp clearfix">',e+='<input type="submit" id="js_bt_post_reply" class="comment_upBtn" onclick="post_reply()" value=""/>',e+='<p class="fr mr10" id="sp_nickname" style="display:none;"><label for="">'+nick_name+':</label><input size="20" type="text" name="nickname" id="re_nickname" /></p>',e+='<p class="login_tips"><a href="javascript:void(0)" class="blue_link mr10" onClick="$(&#39;#js_comment_signBox&#39;).toggle();">sign in</a>or<a href="/sign-up/" class="blue_link ml10">register</a></p>',e+="</div>",e+="</div>",e+='<div id="js_comment_signBox" class="commet_signBox" style="display:none;">',e+='<p id="rw_sign_msg" class="red"></p>',e+='<p><label for="usernamer" class="fl">Email:</label><input type="text" size="20"  id="username" name="username" />New customer? <a class="blue_link" href="/sign-up/">Start here.</a></p>',e+='<p><label for="password" class="fl">Password:</label><input type="password" size="20"  id="password" name="password" />Forgot your account or password?<a id="getpassword" class="vipmorex" onClick = "forgetpsw();return false;" href="m-users-a-forgot.htm">click here </a></p>',e+='<p class="comment_signBox_btn"><input type="submit" onclick="check_btn_signin()" value="Sign in"/></p>',e+="</div>",e+="</div>",$("div.commentReplyBox").find(".js_formBox").remove(),a.hasClass("replyBtn_on")?a.removeClass("replyBtn_on"):($(".replyBtn ").each(function(){$(this).removeClass("replyBtn_on")}),a.addClass("replyBtn_on"),d.append($(e)),$("#re_nickname").val(c),is_signin()?($(".login_tips").html("(1000 "+characters+")"),$("#sp_nickname").show()):$(".login_tips").html('<a href="javascript:void(0)" class="blue_link mr10" onClick="$(&#39;#js_comment_signBox&#39;).toggle();">sign in</a>or<a href="/sign-up/" class="blue_link ml10">register</a>'),$("#js_re_content").attr("rid",b))});